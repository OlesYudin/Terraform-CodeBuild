# <div align="center">AWS Code Build</div>

`Codebuild` - это инструмент для CI/CD, с помощью него можно автоматически доставлять новую версию ПО на сервер. Codebuild при новом коммите запускает контейнер, в котором будет собираться проект и в последствии при успешной сборке доставлять на сервер, к примеру: EC2, ECS Cluster, EKS, etc.

<div align="center"><b>Для того, что бы создать Pipeline, нужно:</b></div>

1. Build project
2. Передать credentials (например: аутентификационные данные к GitHub)
3. Создать Pipeline в котором будет определенно где будут происходить изменения после интеграции новой версии проекта

## Build project:

В нем создается проект и определяется такие данные:

- `Source` - где CodeBuild будет брать информацию о изменении проекта (SCM: GitHub, BitBucket, AWS CodeCommit, etc.)
- `Environment` - определяет на каком железе будет запускаться контейнер, который в последствии собирает проект (Ubuntu, AWS Linux, Windows)
- `Artifacts` -
- `Logs` - обозначает где будут хранится логи проекта, например логи сборки проекта

## Security:

В AWS есть два ресурса для хранения чувствительных данных `secrets manager` и `service manager/parameter store`

- `secrets manager` - можно использовать для хранения паролей, токенов. **Цена: 0.4$ за одно значение в месяц**
- `parameter store` - в нем можно хранить любые внешние переменные, в том числе и чувствительные. Но, нельзя создать пару, к примеру username-password. Можно создать отдельно username и отдельно password, что не всегда удобно. **Цена: бесплатно**

Для того что бы запустить codebuild, нужно авторизоваться в аккаунте, где хранится код проекта, к примеру GitHub. В таком случае, codebuild должен знать либо: _username, password_; либо _Github AUth token_

После создания токена, нужно его передать в AWS.

```
если токен от GitHub попадет в GitHub аккаунт, он удалится
```

У terraform есть ресурс "aws_codebuild_source_credential", его можно использовать для передачи ключа в AWS
